<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Collections | ExamArchive</title>
<style>
:root {
  --accent: #d32f2f;
  --bg: #f7f7f8;
  --card: #fff;
  --text: #111;
  --muted: #666;
}
body { margin:0; background:var(--bg); font-family: Inter, system-ui, sans-serif; color:var(--text); }
header {
  background:#222; color:#fff; padding:10px 20px;
  display:flex; align-items:center; justify-content:space-between;
}
header h1 { margin:0; font-size:1.1rem; }
nav a { color:#fff; text-decoration:none; margin-left:14px; font-size:14px; }
nav a:hover { text-decoration:underline; }

.container { max-width:1000px; margin:20px auto; padding:0 15px; }
.grid { display:grid; gap:12px; grid-template-columns:repeat(auto-fill,minmax(250px,1fr)); }
.card {
  background:var(--card); border-radius:10px; box-shadow:0 2px 8px rgba(0,0,0,0.05);
  padding:12px;
}
.title { font-weight:600; color:var(--accent); margin-bottom:6px; font-size:15px; }
.meta { color:var(--muted); font-size:13px; margin-bottom:8px; }
.remove-btn {
  background:none; border:1px solid var(--accent); color:var(--accent);
  border-radius:6px; padding:4px 8px; font-size:13px; cursor:pointer;
}
.remove-btn:hover { background:var(--accent); color:#fff; }
footer {
  background:#eee; padding:10px; text-align:center; color:#555; font-size:13px; margin-top:30px;
}
</style>
</head>
<body>

<header>
  <h1>ExamArchive</h1>
  <nav>
    <a href="/index.html">Home</a>
    <a href="/browse.html">Browse</a>
    <a href="/collection.html">Collections</a>
    <a href="/about.html">About</a>
  </nav>
</header>

<div class="container">
  <h2 style="color:var(--accent);font-size:1.2rem;">Your Saved Papers</h2>
  <div id="grid" class="grid"></div>
  <div id="empty" style="text-align:center;color:#777;margin-top:30px;">No saved papers yet.</div>
</div>

<footer>© 2025 ExamArchive | Powered by AI</footer>

<script>
const STORAGE_KEY = "saved_papers";

(async function() {
  const res = await fetch("/mains/paper.json");
  const papers = await res.json();
  const saved = JSON.parse(localStorage.getItem(STORAGE_KEY) || "[]");

  const grid = document.getElementById("grid");
  const empty = document.getElementById("empty");

  const list = papers.filter(p => saved.includes(p.id));
  if(!list.length){ empty.style.display="block"; return; }
  empty.style.display="none";

  list.forEach(p=>{
    const card = document.createElement("div");
    card.className="card";
    const btn = document.createElement("button");
    btn.className="remove-btn";
    btn.textContent="Remove";
    btn.onclick=()=>{
      saved.splice(saved.indexOf(p.id),1);
      localStorage.setItem(STORAGE_KEY, JSON.stringify(saved));
      card.remove();
      if(!grid.children.length) empty.style.display="block";
    };
    card.innerHTML = `
      <div class="title"><a href="${p.file}" target="_blank" style="text-decoration:none;color:var(--accent)">${p.title}</a></div>
      <div class="meta">${p.subject || ""} · ${p.paper_type || ""} · ${p.university || ""} · ${p.year || ""}</div>
    `;
    card.appendChild(btn);
    grid.appendChild(card);
  });
})();
</script>

</body>
</html>